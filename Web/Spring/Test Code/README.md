# Test Code

## 테스트코드를 작성하는 이유
1. 테스트 코드가 없이 검증하는 과정은 비용이 많이 든다. 
   - 테스트코드를 사용하지 않는 Flow
     1. 검증 코드 작성
     2. 애플리케이션 실행
     3. Postman 등을 이용해 request
     4. log 혹은 print
     5. 원치 않는 결과 발생 시 종료
     6. 반복
   - 테스트코드를 사용하는 Flow
     1. 테스트코드 작성
     2. 테스트코드 실행
     3. 검증
     4. 테스트코드 수정
2. 계층별로 구성된 스프링에서 계층별 테스트를 통해 어느 부분이 잘못되었는지 쉽게 파악이 가능하다.
   - 새로운 기능이 추가되었을 때 기존 코드에 영향이 간다면 어느 부분을 수정해야 하는지 명확하게 알 수 있다.
3. 기능에 대한 불확실성이 감소한다.

## 단위 테스트와 통합 테스트

### 단위 테스트
- 하나의 객체를 기준으로 독립적으로 진행되는 작은 단위의 테스트
- 장점
  - 새로운 기능에 대해 빠르게 작성할 수 있다.
  - Test 코드 자체가 하나의 문서가 될 수 있다.
  - 시간과 비용이 절감된다.
- 단점
  - 하나의 객체에 대해서만 테스트하므로 다른 객체와 상호작용을 위해 가짜 객체를 정의해야 함. -> 가짜 객체의 리턴값도 작성해야 함.
  - 실제 운영 환경과 다른 답변을 내놓을 가능성 존재

### 통합 테스트
- 여러 개의 객체를 함께 통함하는 과정에서 객체 간의 호환성을 확인하는 테스트
- 장점
  - 실제 객체간의 통신을 하므로 가짜 객체가 필요하지 않음.
  - 실제 운영 환경과 같은 값 도출 가능
- 단점
  - 테스트 한 번에 많은 비용이 들어간다.
  - 어느 계층의 문제인지 확인하기 어려움.

## 좋은 단위 테스트 작성 방법
1. 하나의 테스트는 하나의 기능에 대해서만 테스트
2. 테스트 주체와 협력자 구분 (실제 테스트할 객체, 가짜 객체)
3. Given, When, Then 형식으로 작성
   - Given: 테스트 사전 준비
   - When: 실제 테스트 행위
   - Then: 테스트 결과 검증

## Spring Boot에서의 테스트

Spring Boot는 `spring-boot-starter-test` 의존성을 추가할 시 테스트를 위한 도구들이 자동으로 추가된다.<br>
단위 테스트에 가장 많이 쓰이는 툴은 JUnit<br>

### JUnit
> - 테스트 방식을 구분할 수 있는 어노테이션 제공
> - `@Test` 어노테이션으로 호출할 때 마다 새 인스턴스 생성, 독립 테스트가 가능하다.
> - Assertion메소드 제공 (예상 결과 검증)
> - 사용 방법이 단순하다.


## 질문

### 단위테스트와 통합 테스트는 어떤 차이점이 있나요?
> 단위 테스트는 하나의 모듈에 대해 독립적인 테스트를 진행하는 것이고 통합 테스트는 여러 기능모듈을 한 번에 테스트하는 것입니다.단위 테스트는 하나의 모듈만 테스트하기에 통신이 일어나는 다른 모듈을 가짜 객체로 생성해야 한다는 특징이 있으며 시간과 비용이 통합 테스트에 비해 절감되고 테스트코드가 하나의 문서가 될 수 있습니다.



## 참고
[Springboot-Test-코드-작성-1](https://dingdingmin-back-end-developer.tistory.com/entry/Springboot-Test-%EC%BD%94%EB%93%9C-%EC%9E%91%EC%84%B1-1)<br>
[JUnit으로 단위 테스트 코드 만들기](https://velog.io/@suhyun_zip/JUnit%EC%9C%BC%EB%A1%9C-%EB%8B%A8%EC%9C%84-%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%BD%94%EB%93%9C-%EB%A7%8C%EB%93%A4%EA%B8%B0)
