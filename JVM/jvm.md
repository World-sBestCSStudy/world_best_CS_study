## JVM

- 자바 프로그램 런타임 환경을 제공하는 소프트웨어.
- 자바 애플리케이션을 클래스 로더를 통해 읽어 들여, 자바 API와 함께 실행하는 역할
- Java와 OS 사이에서 중개자 역할을 수행해 **Java가 OS에 구애받지 않고 실행**되도록 한다.
- **Garbage Collection, 즉 프로그램 메모리 관리도 하며 최적화도 수행**한다.

## JVM구조

- 클래스 로더
    - 필요한 클래스 파일을 찾고 동적으로 로드하여 실행 시에 클래스를 사용할 수 있도록 한다. 로드된 클래스는 JVM의 메모리 영역에 저장된다.
- 실헹엔진
    - JVM이 로드한 클래스 파일을 실행하는 역할을 담당
    - 실행 엔진은 바이트 코드를 기계어로 변환하고, 이를 실행하여 프로그램을 실행
    - 주요한 실행 엔진 구성 요소로는 인터프리터(Interpreter)와 JIT(Just-In-Time) 컴파일러
        - 인터프리터 : 바이트코드를 한 줄씩 해석하고 실행하는 방식으로 동작하며,
        - JIT컴파일러 : 인터프리터가 반복되는 코드를 동적으로 기계어로 컴파일하여 실행 속도를 향상
        
- 메모리 영역
    - 메서드 영역  : 클래스 정보, 상수 풀(Constant Pool), 메서드 코드 등의 정보 저장
    - 힙  : 동적으로 생성된 객체와 배열을 저장한다. 가비지 컬렉션은 힙에서 불필요한 객체를 자동으로 정리
    - 스택 : 메서드 호출과 관련된 데이터를 저장. 스레드마다 별도의 스택이 생성되며, 메서드 호출 시에는 호출된 메서드의 프레임(Frame)이 스택에 추가
    - PC Register : 현재 실행 중인 명령어의 주소를 저장
    - 네이티브 메서드 스택 : Java 외부에서 사용되는 네이티브 코드(C/C++)를 위한 스택 저장

## JAVA 실행순서

1. Java 프로그램이 실행되면 JVM은 OS로부터 해당 프로그램이 필요로 하는 메모리를 할당받는다. JVM은 할당받은 메모리를 용도에 따라 여러 영역으로 나누어 관리한다.
2. 자바 컴파일러(javac)가 자바 소스 코드(.java)를 읽어 들여 자바 바이트 코드(.class)로 변환시킨다.
3. Class Loader를 통해 자바 바이트 코드를 JVM Runtime Data Areas(메모리 영역)로 로딩한다.
4. 로딩된 바이트 코드들은 Execution Engine을 통해 해석된다.
5. 해석된 바이트 코드는 JVM Runtime Data Areas(메모리 영역)에 배치되어 실질적인 수행이 이루어진다. 이러한 실행과정에서 JVM은 필요에 따라 Garbage Collection과 같은 메모리 관리 작업을 수행한다.