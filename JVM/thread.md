## ìŠ¤ë ˆë“œ VS í”„ë¡œì„¸ìŠ¤

```jsx
í”„ë¡œì„¸ìŠ¤(Process)ëŠ” ì¼ë°˜ì ìœ¼ë¡œ cpuì— ì˜í•´ ë©”ëª¨ë¦¬ì— ì˜¬ë ¤ì ¸ ì‹¤í–‰ì¤‘ì¸ í”„ë¡œê·¸ë¨ì„ ë§í•˜ë©°, 
ìì‹ ë§Œì˜ ë©”ëª¨ë¦¬ ê³µê°„ì„ í¬í•¨í•œÂ ë…ë¦½ì ì¸ ì‹¤í–‰ í™˜ê²½ì„ ê°€ì§€ê³ Â ìˆìŠµë‹ˆë‹¤. 
ìš°ë¦¬ê°€ ì‚¬ìš©í•˜ëŠ” í”„ë¡œê·¸ë¨ ì¤‘ ì¼ë¶€ëŠ” ì—¬ëŸ¬ í”„ë¡œì„¸ìŠ¤ê°„ ìƒí˜¸ì‘ìš©ì„ í•˜ëŠ” ê²ƒì¼ìˆ˜ë„ ìˆë‹¤.
ìë°” JVM(Java Virtual Machine)ì€ ì£¼ë¡œ í•˜ë‚˜ì˜ í”„ë¡œì„¸ìŠ¤ë¡œ ì‹¤í–‰ë˜ë©°, 
ë™ì‹œì— ì—¬ëŸ¬ ì‘ì—…ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ì„œ ë©€í‹° ìŠ¤ë ˆë“œë¥¼ ì§€ì›í•˜ê³  ìˆë‹¤.
```

```
ìŠ¤ë ˆë“œ(Thread)ëŠ” í”„ë¡œì„¸ìŠ¤ì•ˆì—ì„œ ì‹¤ì§ˆì ìœ¼ë¡œ ì‘ì—…ì„ ì‹¤í–‰í•˜ëŠ” ë‹¨ìœ„ë¥¼ ë§í•˜ë©°, ìë°”ì—ì„œëŠ” JVM(Java Virtual Machine)ì— ì˜í•´ ê´€ë¦¬ëœë‹¤. í”„ë¡œì„¸ìŠ¤ì—ëŠ” ì ì–´ë„ í•œê°œ ì´ìƒì˜ ìŠ¤ë ˆë“œê°€ ìˆìœ¼ë©°, Main ìŠ¤ë ˆë“œ í•˜ë‚˜ë¡œ ì‹œì‘í•˜ì—¬ ìŠ¤ë ˆë“œë¥¼ ì¶”ê°€ ìƒì„±í•˜ê²Œ ë˜ë©´ ë©€í‹° ìŠ¤ë ˆë“œ í™˜ê²½ì´ ë©ë‹ˆë‹¤. ì´ëŸ¬í•œ ìŠ¤ë ˆë“œë“¤ì€ í”„ë¡œì„¸ìŠ¤ì˜ ë¦¬ì†ŒìŠ¤ë¥¼ ê³µìœ í•˜ê¸° ë•Œë¬¸ì— íš¨ìœ¨ì ì´ê¸´ í•˜ì§€ë§Œ ì ì¬ì ì¸ ë¬¸ì œì ì— ë…¸ì¶œë  ìˆ˜ë„ ìˆë‹¤.
```

## ìŠ¤ë ˆë“œ êµ¬í˜„

1. Runnable ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„
2. Thread í´ë˜ìŠ¤ ìƒì†

â†’ ë‘˜ë‹¤ run ë©”ì†Œë“œë¥¼ ì˜¤ë²„ë¼ì´ë”© í•˜ëŠ” ë°©ì‹

```jsx
public class MyThread implements Runnable {
    @Override
    public void run() {
        // ìˆ˜í–‰ ì½”ë“œ
    }
}
```

```jsx
public class MyThread extends Thread {
    @Override
    public void run() {
        // ìˆ˜í–‰ ì½”ë“œ
    }
}
```

## ìŠ¤ë ˆë“œ ìƒì„±

- Runnable ì¸í„°í˜ì´ìŠ¤ â†’ êµ¬í˜„ëœ Runnable í´ë˜ìŠ¤ë¥¼ ì¸ìŠ¤í„´ìŠ¤í™”í•´ì„œ  Threadìƒì„±ìì—ê²Œ ì¸ìë¡œ ë„˜ê²¨ì¤˜ì•¼í•œë‹¤.

```java
public static void main(String[] args) {
    Runnable r = new MyThread();
    Thread t = new Thread(r, "mythread");
}

```

- Thread í´ë˜ìŠ¤ ìƒì† â†’ getName()ìœ¼ë¡œ í˜¸ì¶œ
- Runnable êµ¬í˜„í•œ Thread â†’ Thread í´ë˜ìŠ¤ì˜ static ë©”ì†Œë“œì¸ currentThread()ë¥¼ í˜¸ì¶œ

```jsx
public class ThreadTest implements Runnable {
    public ThreadTest() {}
    
    public ThreadTest(String name){
        Thread t = new Thread(this, name);
        t.start();
    }
    
    @Override
    public void run() {
        for(int i = 0; i <= 50; i++) {
            System.out.print(i + ":" + Thread.currentThread().getName() + " ");
            try {
                Thread.sleep(100);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }
}
```

### â“ì™œ start()ë¡œ ì‹¤í–‰?

ğŸ’¡Â **run() ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•œë‹¤ë©´, ì´ê±´ ìŠ¤ë ˆë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë‹¤.**

â†’run() ë©”ì†Œë“œë¥¼ ì´ìš©í•œë‹¤ëŠ” ê²ƒì€ main()ì˜ ì½œ ìŠ¤íƒ í•˜ë‚˜ë§Œ ì´ìš©í•˜ëŠ” ê²ƒìœ¼ë¡œ ìŠ¤ë ˆë“œ í™œìš©ì´ ì•„ë‹ˆë‹¤. (ê·¸ëƒ¥ ìŠ¤ë ˆë“œ ê°ì²´ì˜ runì´ë¼ëŠ” ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒ)

â†’ start() ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ë©´, JVMì€ ì•Œì•„ì„œ ìŠ¤ë ˆë“œë¥¼ ìœ„í•œ ì½œ ìŠ¤íƒì„ ìƒˆë¡œ ë§Œë“¤ì–´ì£¼ê³  context switchingì„ í†µí•´ ìŠ¤ë ˆë“œë‹µê²Œ ë™ì‘í•˜ë„ë¡ í•´ì¤€ë‹¤.

**ì¦‰, start()ëŠ” ìŠ¤ë ˆë“œê°€ ì‘ì—…ì„ ì‹¤í–‰í•˜ëŠ”ë° í•„ìš”í•œ ì½œ ìŠ¤íƒì„ ìƒì„±í•œ ë‹¤ìŒ run()ì„ í˜¸ì¶œí•´ì„œ ê·¸ ìŠ¤íƒ ì•ˆì— run()ì„ ì €ì¥í•  ìˆ˜ ìˆë„ë¡ í•´ì¤€ë‹¤.**

## ìŠ¤ë ˆë“œ ì‹¤í–‰ ì œì–´

- **NEW**Â : ìŠ¤ë ˆë“œê°€ ìƒì„±ë˜ê³  ì•„ì§ start()ê°€ í˜¸ì¶œë˜ì§€ ì•Šì€ ìƒíƒœ
- **RUNNABLE**Â : ì‹¤í–‰ ì¤‘ ë˜ëŠ” ì‹¤í–‰ ê°€ëŠ¥ ìƒíƒœ
- **BLOCKED**Â : ë™ê¸°í™” ë¸”ëŸ­ì— ì˜í•´ ì¼ì‹œì •ì§€ëœ ìƒíƒœ(lockì´ í’€ë¦´ ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¼)
- **WAITING, TIME_WAITING**Â : ì‹¤í–‰ê°€ëŠ¥í•˜ì§€ ì•Šì€ ì¼ì‹œì •ì§€ ìƒíƒœ
- **TERMINATED**Â : ìŠ¤ë ˆë“œ ì‘ì—…ì´ ì¢…ë£Œëœ ìƒíƒœ

## ìŠ¤ë ˆë“œ ë™ê¸°í™”

- ìŠ¤ë ˆë“œì˜ ë™ê¸°í™”ë¥¼ ìœ„í•´ì„ , ì„ê³„ ì˜ì—­(critical section)ê³¼ ì ê¸ˆ(lock)ì„ í™œìš©.
- ì„ê³„ì˜ì—­ì„ ê°€ì§€ê³  ìˆëŠ” lockì„ ë‹¨ í•˜ë‚˜ì˜ ìŠ¤ë ˆë“œì—ê²Œë§Œ ë¹Œë ¤ì£¼ëŠ” ê°œë…(ìˆ˜í–‰í›„ lock ë°˜ë‚©)

### ìŠ¤ë ˆë“œ ë™ê¸°í™” ë°©ë²•

- **ì„ê³„ ì˜ì—­(critical section)** : ê³µìœ  ìì›ì— ë‹¨ í•˜ë‚˜ì˜ ìŠ¤ë ˆë“œë§Œ ì ‘ê·¼í•˜ë„ë¡
- **ë®¤í…ìŠ¤(mutex)** : ê³µìœ  ìì›ì— ë‹¨ í•˜ë‚˜ì˜ ìŠ¤ë ˆë“œë§Œ ì ‘ê·¼í•˜ë„ë¡(ì„œë¡œ ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ì— ì†í•œ ìŠ¤ë ˆë“œë„ ê°€ëŠ¥)
- **ì´ë²¤íŠ¸(event)** : íŠ¹ì •í•œ ì‚¬ê±´ ë°œìƒì„ ë‹¤ë¥¸ ìŠ¤ë ˆë“œì—ê²Œ ì•Œë¦¼
- **ì„¸ë§ˆí¬ì–´(semaphore)** : í•œì •ëœ ê°œìˆ˜ì˜ ìì›ì„ ì—¬ëŸ¬ ìŠ¤ë ˆë“œê°€ ì‚¬ìš©í•˜ë ¤ê³  í•  ë•Œ ì ‘ê·¼ ì œí•œ
- **ëŒ€ê¸° ê°€ëŠ¥ íƒ€ì´ë¨¸(waitable timer)** : íŠ¹ì • ì‹œê°„ì´ ë˜ë©´ ëŒ€ê¸° ì¤‘ì´ë˜ ìŠ¤ë ˆë“œ ê¹¨ì›€

---

## **Intrinsic lock**

- ìë°”ì˜ ëª¨ë“  ê°ì²´ëŠ” lockì„ ê°€ì§€ê³  ìˆìŒ
- ëª¨ë“  ê°ì²´ê°€ ê°€ì§€ê³  ìˆê¸° ë–„ë¬¸ì— ê³ ìœ  ë½ ì´ë¼ê³  í•˜ê³ , ëª¨ë‹ˆí„° ì²˜ëŸ¼ ë™ì‘í•œë‹¤ê³  í•˜ì—¬ monitor lockì´ë¼ê³  í•¨
- ì˜ˆì‹œ

```jsx
public class Counter {
    private int count;
 
    public int increase() {
        return ++count;		// Thread-safe í•˜ì§€ ì•Šì€ ì—°ì‚°
    }
}

* countëŠ” atomicì—°ì‚°ì´ë‹¤
  - read (count ê°’ì„ ì½ìŒ) -> modify (count ê°’ ìˆ˜ì •) -> write (count ê°’ ì €ì¥)ì˜ ê³¼ì •ì—ì„œ, 
  ì—¬ëŸ¬ Threadê°€ ê³µìœ  ìì›(count)ìœ¼ë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ë™ì‹œì„± ë¬¸ì œê°€ ë°œìƒí•¨.
```