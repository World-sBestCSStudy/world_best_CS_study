# 데이터베이스

## 데이터베이스에서 무결성이 뭔지 설명해주세요.

```
데이터베이스 무결성은 데이터의 정확성과 일관성을 유지하는 것을 의미합니다. 이를 위해 엔터티 무결성, 참조 무결성, 도메인 무결성 등의 제약 조건이 사용됩니다. 이러한 제약 조건들은 데이터베이스의 신뢰성을 보장하고, 오류나 불일치를 방지합니다.
```

## 데이터베이스 언어(DDL, DML, DCL)에 대해 설명해주세요

```
DDL은 데이터 정의어로, 스키마를 정의하고, 수정, 삭제하는 명령어를 의미합니다. 대표적으로 create, alter, drop등이 있습니다.
DML은 데이터 조작어로, 스키마 내부의 데이터를 조작하는 언어입니다. 대표적으로 select, insert, update, delete 가 있습니다.
DCL의 경우 접근과 트랜잭션을 관리하는 데이터 제어어로, 권한을 관리하는 Grant, Revoke, 트랜잭션을 관리하는 Commit, Rollback이 있습니다.
```

## SELECT 쿼리의 수행 순서를 알려주세요.

```
FROM 절에서 조회할 테이블을 지정한 후
WHERE절에서 조건에 맞는 데이터를 필터링합니다
그 후에 GROUP BY 절에서 레코드 목록을 그룹핑한 후
HAVING절을 통해 그룹의 데이터를 필터링합니다
그 다음에 SELECT를 통해 남은 데이터에서 어떤 열을 출력해줄지를 선택하고
ORDER BY절을 통해 정렬하고 LIMIT절을 통해 몇 개의 행을 보여줄 지 선택하는 식으로 진행이 됩니다.
```

## Redis의 특징을 설명하고, 언제 쓰이는지 설명해주세요. 만약 사용한 경험이 있다면 왜 사용했는지 이유를 말해주세요.

```
Redis는 key-value쌍의 해시 맵과 같은 구조를 가지는 NoSql DBMS입니다. 또한 인 메모리의 특징을 가지기 때문에 데이터에 접근하는 속도가 빠릅니다. 그렇기 때문에 데이터베이스뿐만 아니라 캐시, shared Memory, Message Queue용도로 사용되고 있습니다. 저는 서비스에서 대기방이나 랭킹조회 처럼 동일한 요청이 자주 발생하는 작업에 대해서 사용자에게 빠른 응답을 주기 위해 사용했습니다.
```

## Index에 대해서 설명하고 장점과 단점에 대해서 설명해주세요.

```
인덱스는 데이터베이스에서 테이블의 검색 성능을 높여주는 방법으로 테이블 내의 칼럼의 조합으로 생성합니다.
인덱스를 통해 테이블을 조회하는 속도 향상과 전반적인 시스템의 부하를 줄일 수 있습니다. 또한 많은 데이터나 중복이 적은 칼럼, Join, Where, Order by에 자주 사용되는 칼럼에 인덱스를 적용하면 더 효과적입니다.
하지만 인덱스는 항상 정렬된 상태를 유지하기 때문에 Inset, Update, Delete작업 시 상대적으로 저하가 발생하게 됩니다. 또한 인덱스도 별도의 저장공간을 필요로 하기때문에 많이 생성하면 오히려 성능저하가 발생할 수 있습니다.
```

## 정규화에 대해서 알고있는데로 설명해주세요.

```
정규화란 데이터베이스를 설계할 때, 데이터의 중복을 제거하는 작업을 의미합니다. 중복을 제거함으로써 데이터베이스의 무결성을 지킬 수 있습니다. 정규화에는 1,2,3,BCNF,4,5 정규화로 여러 단계가 존재하며, 이 중 1단계만 설명하자면 데이터의 한 컬럼에는 하나의 갖도록 하여 도메인이 원자 값을 갖도록 하는 단계입니다. 하지만 이러한 정규화를 계속해서 진행하다보면 테이블의 개수가 너무 잘게 쪼개지고 성능이 저하될 가능성이 있기에 정규화에 반하는 반정규화를 진행하기도 합니다.
```

## SQL Injection이 무엇인지 설명해주세요.

```
SQL 인젝션이란 데이터베이스 시스템에 비정상적인 SQL 쿼리를 주입하여, 보안상 취약점을 이용해 설계자의 의도와는 다르게 데이터베이스를 조작하는 공격 기법입니다.
이는 웹 애플리케이션과 데이터베이스 사이의 상호작용 시 발생할 수 있으며, 권한이 없는 데이터에 접근하거나 수정, 삭제할 수 있게 만듭니다.
```

## RDBMS와 NOSQL의 차이를 아시나요?

```
RDBMS는 관계형 데이터베이스로, 테이블간의 관계를 정의하여 데이터를 표현합니다. 또한 이러한 관계형 데이터를 조회 시 Join을 통해 여러 테이블을 엮어 표현하기도 합니다. 대표적으로 MySQL, Oracle등이 있습니다. NoSQL이란 관계가 없고 데이터의 표현 방식이 자유로운 데이터베이스를 의미합니다. Json과 같은 형태의 Document로 데이터를 저장하며, 대표적으로 MongoDB가 있습니다.
```

## 트랜잭션이 무엇인지 설명하고 특성도 알고있는데로 말해봐요.

```
트랜잭션이란 데이터베이스의 상태를 변화시키기 위해 수행하는 작업의 논리적 단위입니다.
트랜잭션은 원자성, 일관성, 격리성, 영속성의 특징을 가집니다.
원자성은 작업이 DB에 모두 반영되거나 혹은 전혀 반영되지 않아야 하는것을 의미합니다.
일관성은 트랜잭션 이후 데이터나 시스템이 가지고 있는 고정요소나 상태가 수행 전과 후의 상태가 같아야한다는 것입니다.
격리성은 하나의 트랜잭션 수행시, 다른 트랜잭션의 영향을 받지 않아야한다는 것이고, 영속성은 트랜잭션의 결과가 영구적으로 반영되어야 한다는 것입니다.
```

## inner join과 outer join의 차이점을 아시나요?

```
A와 B를 Inner Join하면 A와 B의 교집합인 결과물이 나옵니다.
Outer Join은 특정 테이블을 기준으로 데이터를 보여주는 Join 방식으로 Full, Left, Right Outer Join이 있습니다.
Left, Right Outer Join은 각각 왼쪽, 오른쪽 테이블을 기준으로 조인하는 것입니다.
만약 A와 B를 Left Outer Join하면 A의 모든 데이터와 A와 B 테이블의 중복데이터들이 검색됩니다.
Full Outer Join은 A와 B의 합집합인 결과물이 나옵니다.
```

## 옵티마이저에 대해 아는데로 답해주세요.

```
옵티마이저는 가장 효율적인 방법으로 SQL을 수행할 최적의 처리 경로를 생성해주는 DBMS의 핵심 엔진입니다.
개발자가 SQL을 실행하면 DBMS는 옵티마이저를 기반으로 실행계획을 세워서 쿼리를 실행합니다.
옵티마이저는 최적화 기반을 기준으로 나누는 규칙기반(Rule-Based) 옵티마이저(RBO)와, 비용기반(Cost-Based) 옵티마이저(CBO)가 있습니다.
RBO은 실행 계획을 결정할 때 미리 정해둔 SQL 구문에 대한 규칙에 따라 쿼리를 최적화하는 방식입니다.
CBO는 실행 계획을 선택하기 위해 쿼리를 수행하는데 소요되는 일 량 또는 시간을 기반으로 최적화하는 방식입니다.
```

## JPA와 MyBatis를 모두 사용했다고 되어있는데 각자의 특징이 무엇이며 왜 사용했나요?

```
SQL Mapper 방식인 Mybatis 의 경우에는 비교적 학습이 쉽고 SQL에 대한 직접적인 제어를 통해 복잡한 쿼리나 특정 DB에 최적화된 쿼리 작성에 적합하다는 장점이 있습니다.
반면에 단순한 CRUD 작업에 반복적으로 작업을 해주어야 하고 특정DB에 대해 종속된다는 단점이 있습니다.
ORM 방식의 JPA를 사용할 경우에는 DB에 독립적으로 사용 가능하고
SQL 중심이 아닌 객체 중심으로 코드를 작성할 수 있기에 생산성과 유지보수성을 향상시킬 수 있다는 장점이 있습니다.
물론 학습의 어려움이나 복잡한 쿼리를 구현하기 힘들다는 단점을 가지고 있지만 JPA를 통한 DB에 독립적이고 객체지향적인 코드 작성이 프로젝트의 유지 보수에 도움이 될 것이라고 생각하여
원활한 DB 연결을 위해 Mybatis를 사용하였지만 후에는 JPA를 사용하여 프로젝트를 진행하였습니다.
```

## 오픈소스 데이터베이스중에 PostgreSQL, MariaDB 나 MongoDB도 있는데 굳이 Mysql을 사용하신 이유가 있나요?

```
우선 MariaDB보다는 Mysql이 널리 사용되어 레퍼런스가 많고, 안정성이 높다는 것이 첫번째 이유입니다.
둘째로, PostgreSQL은 고급 기능을 필요로 하는 경우 적합한 것으로 알고 있습니다. 저희 서비스의 규모가 그리 크지 않고 가볍다고생각하여 Mysql을 사용하게 되었습니다.
마지막으로 저희 서비스의 경우 테이블간의 관계가 복잡하여 Nosql인 MongoDB 보다는 Mysql이 적합하다 생각하였습니다.
```

## 데이터베이스의 key에는 어떤 종류가 있는지 알고있는데로 말해봐요.

```
키에는 총 6종류가 있습니다.
먼저, 유일성을 만족하는 슈퍼키입니다. 하나 혹은 그 이상의 속성들의 집합을 통해 데이터를 식별할 수 있는 키입니다.
슈퍼키들 중 최소성을 만족하는 키를 후보키라고 합니다. 최소한의 속성을 사용해서 데이터를 식별하며, 이들은 모두 기본키가 될 수 있습니다.
기본키는 데이터를 식별하는 데에 쓰이는 속성들의 집합으로, MySQL에서는 기본키가 자동으로 인덱스로 설정됩니다.
기본키로 설정되지 않은 후보키는 대체키입니다. 기본키가 삭제되는 경우 기본키의 역할을 할 수 있습니다.
또한 관계형 데이터베이스에서 관계를 식별하는 속성을 외래키라고 합니다. 주로 다른 테이블의 기본키와 연관시킵니다.
또한 속성이 여러개로 구성된 키를 복합키라고 합니다.
```

## 프로시저가 뭔지 알고있나요?

```
일련의 쿼리를 마치 하나의 함수처럼 실행하기 위한 쿼리의 집합으로 DBMS에서 제공하는 기능입니다.
유지보수가 용이하고, 초기에 최적화를 한 상태로 캐싱하기 때문에 서버 성능이 향상될 수 있습니다.
또한 DB로 직접 접근을 제한하여 보안성을 높일 수 있고, 쿼리문을 매번 다 보내는 것이 아닌 내부에서 사용되는 변수들만 보내 트래픽 감소 등의 이점이 있습니다.
하지만 DBMS에 의존적이고 표준 sql과 차이가 있어 호환성 문제가 있을 수 있고, 디버깅이 어렵다는 단점이 있습니다.
```

## 데이터베이스의 회복기법에 대해 알고있는걸 말해봐요.

```
대표적으로 로그회복기법인 지연갱신기법과 즉시갱신기법이 있습니다. 지연갱신기법은 트랜잭션이 수행되는 동안 갱신된 내용은 로그에 보관하고 커밋시점에 로그에 보관된 내용을 실제 데이터 베이스에 기록하는 기법으로 Redo작업만 가능합니다. 즉시 갱신 기법은 트랜잭션이 데이터를 갱신하면 커밋 전이라도 데이터베이스에 즉시 반영하는 기법으로 Redo와 Undo모두 사용가능합니다.
```
